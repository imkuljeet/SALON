<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Admin Dashboard</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="./css/adminDashboard.css">
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top">
    <div class="container">
      <a class="navbar-brand" href="index.html">Salon Admin</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" 
              aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <button class="btn btn-danger" onclick="logout()">Logout</button>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Admin Dashboard Sections -->
  <section class="container py-5">
    <h1 class="text-center mb-4">Admin Dashboard</h1>
    <!-- Total Appointments Overview -->
    <div class="row mb-4">
      <div class="col-md-4">
        <div class="card text-center">
          <div class="card-body">
            <h5 class="card-title">Total Booked</h5>
            <p class="card-text">120</p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card text-center">
          <div class="card-body">
            <h5 class="card-title">Completed</h5>
            <p class="card-text">90</p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card text-center">
          <div class="card-body">
            <h5 class="card-title">Canceled</h5>
            <p class="card-text">30</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Manage Appointments -->
    <div class="mb-5">
      <h3>Manage Appointments</h3>
      <button class="btn btn-primary mb-3">View & Update</button>
      <!-- Appointments Table -->
      <div class="table-responsive">
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>#</th>
              <th>Customer Name</th>
              <th>Service</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td>John Doe</td>
              <td>Haircut</td>
              <td>Booked</td>
              <td><button class="btn btn-sm btn-success">Complete</button></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Manage Customers -->
    <div class="mb-5">
      <h3>Manage Customers</h3>
      <button class="btn btn-primary mb-3">View Customers</button>
    </div>

    <!-- Manage Services -->
    <div class="mb-5">
      <h3>Manage Services</h3>
      <button class="btn btn-primary mb-3">Add Service</button>
      <button class="btn btn-primary mb-3">Edit Services</button>
      <button class="btn btn-danger mb-3">Delete Services</button>
    </div>

      <!-- Staff Management -->
  <div class="mb-5">
    <h3>Staff Management</h3>
    <button class="btn btn-primary mb-3" id="addStaffButton">Add Staff</button> <!-- Add Staff button stays as before -->
    <div id="staffFormContainer" class="mt-4"></div> <!-- Form container -->
    <div id="staffListContainer" class="table-responsive"></div> <!-- Staff table container -->
  </div>


  </section>

  <!-- Footer -->
  <footer class="py-4 bg-dark text-light text-center">
    <div class="container">
      <p class="mb-0">&copy; 2025 Salon Admin Dashboard. All Rights Reserved.</p>
    </div>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.8.4/axios.min.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const staffListContainer = document.getElementById('staffListContainer'); // Container for staff table
  
      // Function to fetch and display staff details
      const fetchStaffDetails = () => {
        axios.get('http://localhost:3000/staff/get-staffs') // Replace with your actual endpoint
          .then(response => {
            const staffData = response.data.staff; // Assuming response contains a 'staff' array
            staffListContainer.innerHTML = ''; // Clear any existing content
  
            // Create the table dynamically
            const table = document.createElement('table');
            table.classList.add('table', 'table-bordered');
  
            // Create table header
            const thead = document.createElement('thead');
            const headerRow = document.createElement('tr');
            ['#', 'Name', 'Email', 'Position', 'Status', 'Actions'].forEach(headerText => {
              const th = document.createElement('th');
              th.innerText = headerText;
              headerRow.appendChild(th);
            });
            thead.appendChild(headerRow);
  
            // Create table body
            const tbody = document.createElement('tbody');
            staffData.forEach((member, index) => {
              const row = document.createElement('tr');
  
              // Add serial number
              const serialCell = document.createElement('td');
              serialCell.innerText = index + 1;
              row.appendChild(serialCell);
  
              // Add name
              const nameCell = document.createElement('td');
              nameCell.innerText = member.name;
              row.appendChild(nameCell);
  
              // Add email
              const emailCell = document.createElement('td');
              emailCell.innerText = member.email;
              row.appendChild(emailCell);
  
              // Add position
              const positionCell = document.createElement('td');
              positionCell.innerText = member.position;
              row.appendChild(positionCell);
  
              // Add status
              const statusCell = document.createElement('td');
              statusCell.innerText = member.status;
              row.appendChild(statusCell);
  
              // Add actions
              const actionsCell = document.createElement('td');
              const editButton = document.createElement('button');
              editButton.classList.add('btn', 'btn-sm', 'btn-primary');
              editButton.innerText = 'Edit';
              const deleteButton = document.createElement('button');
              deleteButton.classList.add('btn', 'btn-sm', 'btn-danger', 'ms-2');
              deleteButton.innerText = 'Delete';
              actionsCell.appendChild(editButton);
              actionsCell.appendChild(deleteButton);
              row.appendChild(actionsCell);
  
              tbody.appendChild(row);
            });
  
            table.appendChild(thead);
            table.appendChild(tbody);
            staffListContainer.appendChild(table);
          })
          .catch(error => {
            console.error('Error fetching staff details:', error);
            staffListContainer.innerHTML = '<p class="text-danger">Failed to fetch staff details. Please try again later.</p>';
          });
      };
  
      // Fetch and display staff details on page load
      fetchStaffDetails();
    });
  </script>
  
</body>
</html>
